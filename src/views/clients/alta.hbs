<div id="contenedor">
    <div class="container py-3">
        <div class="row">
            <div class="mx-auto">
                <!-- form user info -->
                <div class="card">
                    <div class="card-header">
                        <div class="row my-auto">
                            <div class="col-1" style="z-index: 1;">
                                <button type="button" onclick="window.location.href='/clientes'" class="btn btn-dark"><i
                                        class="fas fa-chevron-circle-left"></i></button>
                            </div>
                            <div class="col-10 my-auto ml-2">
                                <h5 class="text-center my-auto">Información Cliente</h5>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <form id="formAltaCliente" class="form" role="form" autocomplete="off" action="/clientes/alta"
                            method="POST">
                            <div class="form-label-group d-none">
                                <input type="datetime" id="fechaNueva" name="fechaAlta" placeholder="Fecha y hora">
                                <label for="fechaHora">Fecha y Hora</label>
                            </div>
                            <div class="form-label-group">
                                <input name="nombre" id="nombre" class="form-control" type="text" placeholder="Nombre"
                                    required>
                                <label for="nombre">Nombre</label>
                            </div>
                            <div class="form-label-group">
                                <input name="local" id="local" class="form-control" type="text" placeholder="Local"
                                    required>
                                <label for="local">Local</label>
                            </div>
                            <div class="row align-items-center">
                                <div class="col-7 pr-1">
                                    <div class="form-label-group">
                                        <input name="cuit" id="cuit" class="form-control" type="number"
                                            placeholder="CUIT">
                                        <label for="cuit">CUIT</label>
                                    </div>
                                    <div class="form-label-group">
                                        <input name="cuil" id="cuil" class="form-control" type="number"
                                            placeholder="CUIL">
                                        <label for="cuil">CUIL</label>
                                    </div>
                                </div>
                                <div class="col-5 pr-0 pl-1">
                                    <div class="form-group text-center">
                                        <label class="h4" for="Estado">Estado</label>
                                        <select required id="Estado" name="Estado"
                                            class="custom-select custom-select-sm" size="3">
                                            <option selected value="Potencial">Potencial</option>
                                            <option value="Activo">Activo</option>
                                            <option value="Inactivo">Inactivo</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="form-label-group">
                                <input name="telefono" id="telefono" class="form-control" type="number"
                                    placeholder="Teléfono" required>
                                <label for="telefono">Teléfono</label>
                            </div>
                            <div class="form-label-group">
                                <input name="telefono2" id="telefono2" class="form-control" type="number"
                                    placeholder="Teléfono Alternativo">
                                <label for="telefono2">Teléfono Alternativo</label>
                            </div>
                            <div class="form-label-group">
                                <input name="correo" id="correo" class="form-control" type="email" placeholder="Correo">
                                <label for="correo">Correo</label>
                            </div>
                            <!--
                            <div class="form-label-group">
                                <div class="custom-control custom-checkbox">
                                    <input onchange="executeLatLon($('#auto-complete')[0])" type="checkbox"
                                        class="custom-control-input pr-0" id="checkDirec" checked>
                                    <label class="custom-control-label mb-2 pl-0" for="checkDirec"><b> ¿Utilizar
                                            información cercana? </b>
                                    </label>
                                </div>
                            </div>
                            -->
                            <div class="form-label-group">
                                <div class="input-group">
                                    <input id="auto-complete" name="direccion" class="form-control" type="text"
                                        placeholder="Direccion" required>
                                    <!--onkeyup="return autoCompleteListener(this, false);"
                                        onclick="return autoCompleteListener(this, true);" required>-->
                                    <label for="auto-complete">Direccion</label>
                                    <div class="input-group-append" style="z-index: 1;">
                                        <button type="button" class="btn btn-primary px-3" onclick="getLocation();"><i
                                                class="fas fa-map-marker-alt"></i></button>
                                    </div>

                                </div>
                                <input name="direccionData" class="form-control" type="hidden">

                                <div class="row text-center">
                                    <button type="button" class="btn btn-primary text-center mx-auto"
                                        onclick="viewMap();">Visualizar
                                        Dirección</button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="observacion">Observaciones</label>
                                <textarea class="form-control" id="observacion" name="observacion" rows="3"></textarea>
                            </div>
                            <div style="display: none;" class="form-group row">
                                <label class="col-lg-3 col-form-label form-control-label">Latitud</label>
                                <div class="col-lg-9">
                                    <input name="lat" class="form-control" type="text" placeholder="Latitud" required>
                                </div>
                            </div>
                            <div style="display: none;" class="form-group row">
                                <label class="col-lg-3 col-form-label form-control-label">Longitud</label>
                                <div class="col-lg-9">
                                    <input name="lon" class="form-control" type="text" placeholder="Longitud" required>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="btn-group mx-auto" role="group" id="buttonGroup">
                                    <button type="reset" class="btn btn-secondary mx-1">Cancelar</button>
                                    <button type="button" onclick="doAjaxRequest()" class="btn btn-success mx-1">Agregar
                                        Cliente</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <!-- /form user info -->
            </div>
        </div>
    </div>
</div>

<div id="hideMap" class="modal">
    <span onclick="document.getElementById('hideMap').style.display='none'; map.getViewPort().resize();" class="close"
        title="Close Modal">&times;</span>
    <form class="modal-content">
        <div class="px-5 py-2">
            <div id="map" class="mx-auto my-auto"></div>
        </div>
        <div class="form-group row mx-auto">
            <div class="input-group col-12">
                <div class="input-group-prepend">
                    <span class="input-group-text"><i class="fas fa-map-marker-alt"></i></span>
                </div>
                <input type="text" class="form-control" id="direccionMapa" placeholder="Direccion" readonly>
            </div>
        </div>
        <div class="form-group row">
            <div class="btn-group mx-auto" role="group">
                <button type="button"
                    onclick="document.getElementById('hideMap').style.display='none'; map.getViewPort().resize();"
                    class="btn btn-success mx-1">Aceptar</button>
            </div>
        </div>
    </form>
</div>

<!-- Modal ALERT -->
<div class="modal fade" data-backdrop="false" data-keyboard="false" id="modalAlert" tabindex="-1" role="dialog"
    aria-labelledby="modalAlert" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Alerta</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="alert" id="alerta" role="alert"></div>
                <div class="text-center" id="spinner" style="display: none;">
                    <div class="spinner-border spinner-border-lg" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer" id="alertFoot">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                <button type="button" class="btn btn-primary" id="btn-confirm">Confirmar</button>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" src="/js/autocomplete.js"></script>
<script type="text/javascript" src="/js/ABMclientes.js"></script>
<script type="text/javascript" src="/js/LocationGPS.js"></script>
<script>
    window.onload = setDateTime();

    window.addEventListener('resize', function () {
        map.getViewPort().resize();
    });

    function viewMap() {
        document.getElementById('hideMap').style.display = 'block';
        map.getViewPort().resize();
        document.getElementById("direccionMapa").value = document.getElementById("auto-complete").value;
    }
    $('.modal-content input').keydown(function (e) {
        if (e.keyCode == 13) {
            e.preventDefault();
            return false;
        }
    });
</script>